{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.219.0"},"children":{"VideoNfcStorageStack-dev":{"id":"VideoNfcStorageStack-dev","path":"VideoNfcStorageStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"VideoBucket":{"id":"VideoBucket","path":"VideoNfcStorageStack-dev/VideoBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/VideoBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"video-nfc-videos-dev-271633506783","corsConfiguration":{"corsRules":[{"maxAge":3000,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"],"exposedHeaders":["ETag"]}]},"lifecycleConfiguration":{"rules":[{"id":"TransitionToIntelligentTiering","status":"Enabled","transitions":[{"storageClass":"INTELLIGENT_TIERING","transitionInDays":90}]}]},"objectLockEnabled":false,"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"VideoNfcStorageStack-dev/VideoBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/VideoBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"VideoBucket6ED8E1AF"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["VideoBucket6ED8E1AF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["VideoBucket6ED8E1AF","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["VideoBucket6ED8E1AF","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"VideoNfcStorageStack-dev/VideoBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"VideoNfcStorageStack-dev/VideoBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"VideoNfcStorageStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"VideoNfcStorageStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Role":{"id":"Role","path":"VideoNfcStorageStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}},"Handler":{"id":"Handler","path":"VideoNfcStorageStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcStorageStack-dev/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/AssetBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"video-nfc-assets-dev-271633506783","ownershipControls":{"rules":[{"objectOwnership":"BucketOwnerPreferred"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"VideoNfcStorageStack-dev/AssetBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/AssetBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AssetBucket1D025086"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AssetBucket1D025086","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AssetBucket1D025086","Arn"]},"/*"]]}]},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::GetAtt":["AssetBucket1D025086","Arn"]},"Sid":"AWSCloudTrailAclCheck"},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AssetBucket1D025086","Arn"]},"/cloudtrail/AWSLogs/271633506783/*"]]},"Sid":"AWSCloudTrailWrite"},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::GetAtt":["AssetBucket1D025086","Arn"]}},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AssetBucket1D025086","Arn"]},"/cloudtrail//AWSLogs/271633506783/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"VideoNfcStorageStack-dev/AssetBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"VideoNfcStorageStack-dev/AssetBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"OAI":{"id":"OAI","path":"VideoNfcStorageStack-dev/OAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/OAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"OAI for video-nfc-dev"}}}}}},"Distribution":{"id":"Distribution","path":"VideoNfcStorageStack-dev/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"VideoNfcStorageStack-dev/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["VideoBucket6ED8E1AF","RegionalDomainName"]},"id":"VideoNfcStorageStackdevDistributionOrigin1FD47429C","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"VideoNfcStorageStackdevDistributionOrigin1FD47429C","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"https-only"},"comment":"video-nfc-dev distribution","httpVersion":"http2","ipv6Enabled":true,"logging":{"bucket":{"Fn::GetAtt":["AssetBucket1D025086","RegionalDomainName"]},"prefix":"cloudfront-logs/"},"priceClass":"PriceClass_200"},"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}}}},"CloudTrail":{"id":"CloudTrail","path":"VideoNfcStorageStack-dev/CloudTrail","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.Trail","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcStorageStack-dev/CloudTrail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.CfnTrail","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudTrail::Trail","aws:cdk:cloudformation:props":{"enableLogFileValidation":true,"eventSelectors":[{"includeManagementEvents":true,"readWriteType":"All"},{"dataResources":[{"type":"AWS::S3::Object","values":[{"Fn::Join":["",[{"Fn::GetAtt":["VideoBucket6ED8E1AF","Arn"]},"/"]]}]}],"includeManagementEvents":true,"readWriteType":"All"}],"includeGlobalServiceEvents":true,"isLogging":true,"isMultiRegionTrail":false,"s3BucketName":{"Ref":"AssetBucket1D025086"},"s3KeyPrefix":"cloudtrail/","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"trailName":"video-nfc-dev-trail"}}}}},"VideoBucketName":{"id":"VideoBucketName","path":"VideoNfcStorageStack-dev/VideoBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"AssetBucketName":{"id":"AssetBucketName","path":"VideoNfcStorageStack-dev/AssetBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontDomain":{"id":"CloudFrontDomain","path":"VideoNfcStorageStack-dev/CloudFrontDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"VideoNfcStorageStack-dev/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcStorageStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcStorageStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"VideoNfcStorageStack-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"VideoBucket6ED8E1AF\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"VideoBucket6ED8E1AF\",\"Arn\"]}","path":"VideoNfcStorageStack-dev/Exports/Output{\"Fn::GetAtt\":[\"VideoBucket6ED8E1AF\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"VideoBucket6ED8E1AF\"}":{"id":"Output{\"Ref\":\"VideoBucket6ED8E1AF\"}","path":"VideoNfcStorageStack-dev/Exports/Output{\"Ref\":\"VideoBucket6ED8E1AF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"AssetBucket1D025086\"}":{"id":"Output{\"Ref\":\"AssetBucket1D025086\"}","path":"VideoNfcStorageStack-dev/Exports/Output{\"Ref\":\"AssetBucket1D025086\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","path":"VideoNfcStorageStack-dev/Exports/Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Fn::GetAtt\":[\"AssetBucket1D025086\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AssetBucket1D025086\",\"Arn\"]}","path":"VideoNfcStorageStack-dev/Exports/Output{\"Fn::GetAtt\":[\"AssetBucket1D025086\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcStorageStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcStorageStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"VideoNfcDatabaseStack-dev":{"id":"VideoNfcDatabaseStack-dev","path":"VideoNfcDatabaseStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"OrganizationTable":{"id":"OrganizationTable","path":"VideoNfcDatabaseStack-dev/OrganizationTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcDatabaseStack-dev/OrganizationTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"organizationId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"organizationId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"video-nfc-Organization-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"ScalingRole":{"id":"ScalingRole","path":"VideoNfcDatabaseStack-dev/OrganizationTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"ShopTable":{"id":"ShopTable","path":"VideoNfcDatabaseStack-dev/ShopTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcDatabaseStack-dev/ShopTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"shopId","attributeType":"S"},{"attributeName":"organizationId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"organizationId-createdAt-index","keySchema":[{"attributeName":"organizationId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"shopId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"video-nfc-Shop-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"ScalingRole":{"id":"ScalingRole","path":"VideoNfcDatabaseStack-dev/ShopTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"VideoMetadataTable":{"id":"VideoMetadataTable","path":"VideoNfcDatabaseStack-dev/VideoMetadataTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcDatabaseStack-dev/VideoMetadataTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"videoId","attributeType":"S"},{"attributeName":"organizationId","attributeType":"S"},{"attributeName":"uploadDate","attributeType":"S"},{"attributeName":"shopId","attributeType":"S"},{"attributeName":"billingMonth","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"organizationId-uploadDate-index","keySchema":[{"attributeName":"organizationId","keyType":"HASH"},{"attributeName":"uploadDate","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"shopId-uploadDate-index","keySchema":[{"attributeName":"shopId","keyType":"HASH"},{"attributeName":"uploadDate","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"billingMonth-organizationId-index","keySchema":[{"attributeName":"billingMonth","keyType":"HASH"},{"attributeName":"organizationId","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"organizationId-billingMonth-index","keySchema":[{"attributeName":"organizationId","keyType":"HASH"},{"attributeName":"billingMonth","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"videoId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"video-nfc-VideoMetadata-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"ScalingRole":{"id":"ScalingRole","path":"VideoNfcDatabaseStack-dev/VideoMetadataTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"BillingTable":{"id":"BillingTable","path":"VideoNfcDatabaseStack-dev/BillingTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcDatabaseStack-dev/BillingTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"billingId","attributeType":"S"},{"attributeName":"organizationId","attributeType":"S"},{"attributeName":"billingMonth","attributeType":"S"},{"attributeName":"status","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"organizationId-billingMonth-index","keySchema":[{"attributeName":"organizationId","keyType":"HASH"},{"attributeName":"billingMonth","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"billingMonth-status-index","keySchema":[{"attributeName":"billingMonth","keyType":"HASH"},{"attributeName":"status","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"billingId","keyType":"HASH"},{"attributeName":"organizationId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"video-nfc-Billing-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"ScalingRole":{"id":"ScalingRole","path":"VideoNfcDatabaseStack-dev/BillingTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"ApprovalRequestTable":{"id":"ApprovalRequestTable","path":"VideoNfcDatabaseStack-dev/ApprovalRequestTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcDatabaseStack-dev/ApprovalRequestTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"requestId","attributeType":"S"},{"attributeName":"approverEmail","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"approverEmail-status-index","keySchema":[{"attributeName":"approverEmail","keyType":"HASH"},{"attributeName":"status","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"status-createdAt-index","keySchema":[{"attributeName":"status","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"requestId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"video-nfc-ApprovalRequest-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeToLiveSpecification":{"attributeName":"expiresAt","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"VideoNfcDatabaseStack-dev/ApprovalRequestTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"OrganizationTableName":{"id":"OrganizationTableName","path":"VideoNfcDatabaseStack-dev/OrganizationTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ShopTableName":{"id":"ShopTableName","path":"VideoNfcDatabaseStack-dev/ShopTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"VideoMetadataTableName":{"id":"VideoMetadataTableName","path":"VideoNfcDatabaseStack-dev/VideoMetadataTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"BillingTableName":{"id":"BillingTableName","path":"VideoNfcDatabaseStack-dev/BillingTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"VideoMetadataTableStreamArn":{"id":"VideoMetadataTableStreamArn","path":"VideoNfcDatabaseStack-dev/VideoMetadataTableStreamArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ApprovalRequestTableName":{"id":"ApprovalRequestTableName","path":"VideoNfcDatabaseStack-dev/ApprovalRequestTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcDatabaseStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcDatabaseStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"VideoNfcDatabaseStack-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"VideoMetadataTable0E75C188\"}":{"id":"Output{\"Ref\":\"VideoMetadataTable0E75C188\"}","path":"VideoNfcDatabaseStack-dev/Exports/Output{\"Ref\":\"VideoMetadataTable0E75C188\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"BillingTableC3F396AA\"}":{"id":"Output{\"Ref\":\"BillingTableC3F396AA\"}","path":"VideoNfcDatabaseStack-dev/Exports/Output{\"Ref\":\"BillingTableC3F396AA\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"OrganizationTableEB2ED67C\"}":{"id":"Output{\"Ref\":\"OrganizationTableEB2ED67C\"}","path":"VideoNfcDatabaseStack-dev/Exports/Output{\"Ref\":\"OrganizationTableEB2ED67C\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"ShopTable66489897\"}":{"id":"Output{\"Ref\":\"ShopTable66489897\"}","path":"VideoNfcDatabaseStack-dev/Exports/Output{\"Ref\":\"ShopTable66489897\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"ApprovalRequestTable754DE8BF\"}":{"id":"Output{\"Ref\":\"ApprovalRequestTable754DE8BF\"}","path":"VideoNfcDatabaseStack-dev/Exports/Output{\"Ref\":\"ApprovalRequestTable754DE8BF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcDatabaseStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcDatabaseStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"VideoNfcAuthStack-dev":{"id":"VideoNfcAuthStack-dev","path":"VideoNfcAuthStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"UserPool":{"id":"UserPool","path":"VideoNfcAuthStack-dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.219.0","metadata":[]},"children":{"smsRole":{"id":"smsRole","path":"VideoNfcAuthStack-dev/UserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"VideoNfcAuthStack-dev/UserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcAuthStack-dev/UserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"VideoNfcAuthStackdevUserPool2AC36A1D"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}}}},"Resource":{"id":"Resource","path":"VideoNfcAuthStack-dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","enabledMfas":["SMS_MFA"],"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"agencyId","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true},{"name":"organizationId","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true},{"name":"shopId","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true},{"name":"role","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"50"},"mutable":true},{"name":"organizationName","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true},{"name":"shopName","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"256"},"mutable":true}],"smsConfiguration":{"externalId":"VideoNfcAuthStackdevUserPool2AC36A1D","snsCallerArn":{"Fn::GetAtt":["UserPoolsmsRole4EA729DD","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Environment":"dev","ManagedBy":"CDK","Project":"video-nfc"},"usernameAttributes":["email"],"userPoolName":"video-nfc-dev-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"UserPoolClient":{"id":"UserPoolClient","path":"VideoNfcAuthStack-dev/UserPool/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcAuthStack-dev/UserPool/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":1440,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"authSessionValidity":3,"callbackUrLs":["https://example.com"],"clientName":"video-nfc-dev-client","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":1440,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"SystemAdminGroup":{"id":"SystemAdminGroup","path":"VideoNfcAuthStack-dev/SystemAdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"システム管理者グループ（全権限）","groupName":"system-admin","precedence":1,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"OrganizationAdminGroup":{"id":"OrganizationAdminGroup","path":"VideoNfcAuthStack-dev/OrganizationAdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"代理店管理者グループ（配下の全販売店を管理）","groupName":"organization-admin","precedence":2,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"ShopUserGroup":{"id":"ShopUserGroup","path":"VideoNfcAuthStack-dev/ShopUserGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"販売店ユーザーグループ（自店舗のみ管理）","groupName":"shop-user","precedence":3,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"UserPoolId":{"id":"UserPoolId","path":"VideoNfcAuthStack-dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UserPoolArn":{"id":"UserPoolArn","path":"VideoNfcAuthStack-dev/UserPoolArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"VideoNfcAuthStack-dev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"SystemAdminGroupName":{"id":"SystemAdminGroupName","path":"VideoNfcAuthStack-dev/SystemAdminGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"OrganizationAdminGroupName":{"id":"OrganizationAdminGroupName","path":"VideoNfcAuthStack-dev/OrganizationAdminGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ShopUserGroupName":{"id":"ShopUserGroupName","path":"VideoNfcAuthStack-dev/ShopUserGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcAuthStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcAuthStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"VideoNfcAuthStack-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"VideoNfcAuthStack-dev/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"UserPoolUserPoolClient40176907\"}":{"id":"Output{\"Ref\":\"UserPoolUserPoolClient40176907\"}","path":"VideoNfcAuthStack-dev/Exports/Output{\"Ref\":\"UserPoolUserPoolClient40176907\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcAuthStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcAuthStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"VideoNfcMainStack-dev":{"id":"VideoNfcMainStack-dev","path":"VideoNfcMainStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"VideoNfcMainStack-dev/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"VideoNfcMainStack-dev/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcMainStack-dev/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for Lambda functions of video-nfc project","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"video-nfc-dev-lambda-execution-role","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcMainStack-dev/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcMainStack-dev/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:DeleteObject","s3:GetObject","s3:ListBucket","s3:PutObject"],"Effect":"Allow","Resource":["arn:aws:s3:::video-nfc-assets-dev-271633506783","arn:aws:s3:::video-nfc-assets-dev-271633506783/*","arn:aws:s3:::video-nfc-videos-dev-271633506783","arn:aws:s3:::video-nfc-videos-dev-271633506783/*"]},{"Action":["s3:GetObject","s3:PutObject"],"Effect":"Allow","Resource":"arn:aws:s3:::video-nfc-videos-dev-271633506783/*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":["arn:aws:dynamodb:ap-northeast-1:271633506783:table/video-nfc-Agency-dev","arn:aws:dynamodb:ap-northeast-1:271633506783:table/video-nfc-AgencyBilling-dev","arn:aws:dynamodb:ap-northeast-1:271633506783:table/video-nfc-VideoMetadata-dev","arn:aws:dynamodb:ap-northeast-1:271633506783:table/video-nfc-VideoMetadata-dev/index/*"]},{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:ListStreams"],"Effect":"Allow","Resource":"arn:aws:dynamodb:ap-northeast-1:271633506783:table/video-nfc-VideoMetadata-dev/stream/*"}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"LambdaExecutionRoleArn":{"id":"LambdaExecutionRoleArn","path":"VideoNfcMainStack-dev/LambdaExecutionRoleArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"LambdaExecutionRoleName":{"id":"LambdaExecutionRoleName","path":"VideoNfcMainStack-dev/LambdaExecutionRoleName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcMainStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcMainStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcMainStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcMainStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"VideoNfcMonitoringStack-dev":{"id":"VideoNfcMonitoringStack-dev","path":"VideoNfcMonitoringStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"AlertTopic":{"id":"AlertTopic","path":"VideoNfcMonitoringStack-dev/AlertTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcMonitoringStack-dev/AlertTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Video NFC Alerts - dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"},{"key":"Stack","value":"Monitoring"}],"topicName":"video-nfc-alerts-dev"}}}}},"EmailSubscription":{"id":"EmailSubscription","path":"VideoNfcMonitoringStack-dev/EmailSubscription","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcMonitoringStack-dev/EmailSubscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":"k.shibayama@advalay.jp","protocol":"email","topicArn":{"Ref":"AlertTopic2720D535"}}}}}},"AlertTopicArn":{"id":"AlertTopicArn","path":"VideoNfcMonitoringStack-dev/AlertTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcMonitoringStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcMonitoringStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"VideoNfcMonitoringStack-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"AlertTopic2720D535\"}":{"id":"Output{\"Ref\":\"AlertTopic2720D535\"}","path":"VideoNfcMonitoringStack-dev/Exports/Output{\"Ref\":\"AlertTopic2720D535\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcMonitoringStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcMonitoringStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"VideoNfcApiStack-dev":{"id":"VideoNfcApiStack-dev","path":"VideoNfcApiStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"GenerateUploadUrlFn":{"id":"GenerateUploadUrlFn","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},"/*"]]}},{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GenerateUploadUrlFnServiceRoleDefaultPolicy939E2788","roles":[{"Ref":"GenerateUploadUrlFnServiceRole000E32B2"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GenerateUploadUrlFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"31da3df83cc3f3a730a88b1ee4fc7e9d282247033993ce5b7dfd676fa810308d.zip"},"description":"Generate pre-signed URL for video upload","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["GenerateUploadUrlFnServiceRole000E32B2","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"ListVideosFn":{"id":"ListVideosFn","path":"VideoNfcApiStack-dev/ListVideosFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/ListVideosFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/ListVideosFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListVideosFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/ListVideosFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListVideosFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"ListVideosFnServiceRoleDefaultPolicy2289C6ED","roles":[{"Ref":"ListVideosFnServiceRole78712B62"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/ListVideosFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/ListVideosFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/ListVideosFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListVideosFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"cf254385cc2e4e81865b47d6c4492a7d7ca1d9ded62e65d298e9d97f1d3d8245.zip"},"description":"List videos with pagination and search","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ListVideosFnServiceRole78712B62","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"GetVideoDetailFn":{"id":"GetVideoDetailFn","path":"VideoNfcApiStack-dev/GetVideoDetailFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GetVideoDetailFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GetVideoDetailFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GetVideoDetailFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},{"Fn::Join":["",[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},"/*"]]}]},{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GetVideoDetailFnServiceRoleDefaultPolicy38F3D09E","roles":[{"Ref":"GetVideoDetailFnServiceRole230300F7"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GetVideoDetailFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GetVideoDetailFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GetVideoDetailFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"bbb24986baf98354cba468b093c6813ed07e38f25c16bc7d45b690d644eb59f4.zip"},"description":"Get video detail (authenticated)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["GetVideoDetailFnServiceRole230300F7","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"DeleteVideoFn":{"id":"DeleteVideoFn","path":"VideoNfcApiStack-dev/DeleteVideoFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/DeleteVideoFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/DeleteVideoFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteVideoFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/DeleteVideoFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteVideoFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttAssetBucket1D025086Arn5988FF07"},{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},{"Fn::Join":["",[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttAssetBucket1D025086Arn5988FF07"},"/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},"/*"]]}]},{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"DeleteVideoFnServiceRoleDefaultPolicyA48EA12E","roles":[{"Ref":"DeleteVideoFnServiceRoleD6ED579B"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/DeleteVideoFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/DeleteVideoFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/DeleteVideoFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteVideoFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"ece272886cb7be2eeec01c3dc8d7fd755670de72ed62531871f256d24b26470e.zip"},"description":"Delete video (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["DeleteVideoFnServiceRoleD6ED579B","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"GetVideoDetailPublicFn":{"id":"GetVideoDetailPublicFn","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},{"Fn::Join":["",[{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttVideoBucket6ED8E1AFArn892B0DD6"},"/*"]]}]},{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GetVideoDetailPublicFnServiceRoleDefaultPolicy1E8120CB","roles":[{"Ref":"GetVideoDetailPublicFnServiceRole9261D149"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetVideoDetailPublicFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"d506051a5f5f7b933a753751a4a6f4e1aa796b4509c13a264cb0430981c6fb84.zip"},"description":"Get video detail (public, no authentication)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["GetVideoDetailPublicFnServiceRole9261D149","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"GetAdminStatsFn":{"id":"GetAdminStatsFn","path":"VideoNfcApiStack-dev/GetAdminStatsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GetAdminStatsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GetAdminStatsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetAdminStatsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GetAdminStatsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetAdminStatsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GetAdminStatsFnServiceRoleDefaultPolicy86E11032","roles":[{"Ref":"GetAdminStatsFnServiceRole5F649976"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GetAdminStatsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GetAdminStatsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GetAdminStatsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetAdminStatsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Get admin statistics (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/getAdminStats.handler","memorySize":1024,"role":{"Fn::GetAtt":["GetAdminStatsFnServiceRole5F649976","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"ListAllVideosFn":{"id":"ListAllVideosFn","path":"VideoNfcApiStack-dev/ListAllVideosFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/ListAllVideosFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/ListAllVideosFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListAllVideosFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/ListAllVideosFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListAllVideosFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"ListAllVideosFnServiceRoleDefaultPolicy945C1E55","roles":[{"Ref":"ListAllVideosFnServiceRole6BE842B6"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/ListAllVideosFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/ListAllVideosFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/ListAllVideosFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListAllVideosFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"List all videos (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/listAllVideos.handler","memorySize":1024,"role":{"Fn::GetAtt":["ListAllVideosFnServiceRole6BE842B6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"ListOrganizationsFn":{"id":"ListOrganizationsFn","path":"VideoNfcApiStack-dev/ListOrganizationsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/ListOrganizationsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/ListOrganizationsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListOrganizationsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/ListOrganizationsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListOrganizationsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"ListOrganizationsFnServiceRoleDefaultPolicy60544C45","roles":[{"Ref":"ListOrganizationsFnServiceRole3C784B76"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/ListOrganizationsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/ListOrganizationsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/ListOrganizationsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ListOrganizationsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"List organizations","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/listOrganizations.handler","memorySize":512,"role":{"Fn::GetAtt":["ListOrganizationsFnServiceRole3C784B76","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"CreateOrganizationFn":{"id":"CreateOrganizationFn","path":"VideoNfcApiStack-dev/CreateOrganizationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/CreateOrganizationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/CreateOrganizationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateOrganizationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/CreateOrganizationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateOrganizationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"CreateOrganizationFnServiceRoleDefaultPolicy5966FF10","roles":[{"Ref":"CreateOrganizationFnServiceRoleF824440C"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/CreateOrganizationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/CreateOrganizationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/CreateOrganizationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateOrganizationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Create organization (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/createOrganization.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateOrganizationFnServiceRoleF824440C","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"UpdateOrganizationFn":{"id":"UpdateOrganizationFn","path":"VideoNfcApiStack-dev/UpdateOrganizationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"UpdateOrganizationFnServiceRoleDefaultPolicy59A899E6","roles":[{"Ref":"UpdateOrganizationFnServiceRole45F0DD13"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/UpdateOrganizationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Update organization (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/updateOrganization.handler","memorySize":512,"role":{"Fn::GetAtt":["UpdateOrganizationFnServiceRole45F0DD13","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"DeleteOrganizationFn":{"id":"DeleteOrganizationFn","path":"VideoNfcApiStack-dev/DeleteOrganizationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"DeleteOrganizationFnServiceRoleDefaultPolicy5CEE4450","roles":[{"Ref":"DeleteOrganizationFnServiceRole87D161BB"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/DeleteOrganizationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Delete organization permanently (system-admin only)","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/deleteOrganization.handler","memorySize":512,"role":{"Fn::GetAtt":["DeleteOrganizationFnServiceRole87D161BB","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"CreateApprovalRequestFn":{"id":"CreateApprovalRequestFn","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"}}],"Version":"2012-10-17"},"policyName":"CreateApprovalRequestFnServiceRoleDefaultPolicy4FFBC370","roles":[{"Ref":"CreateApprovalRequestFnServiceRoleA74C72AD"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CreateApprovalRequestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Create approval request for organization registration","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/createApprovalRequest.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateApprovalRequestFnServiceRoleA74C72AD","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"SubmitApprovalFormFn":{"id":"SubmitApprovalFormFn","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"}}],"Version":"2012-10-17"},"policyName":"SubmitApprovalFormFnServiceRoleDefaultPolicy906C0A9C","roles":[{"Ref":"SubmitApprovalFormFnServiceRole33F1B3B9"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/SubmitApprovalFormFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Submit approval form data","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/submitApprovalForm.handler","memorySize":512,"role":{"Fn::GetAtt":["SubmitApprovalFormFnServiceRole33F1B3B9","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"GetPendingApprovalsFn":{"id":"GetPendingApprovalsFn","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GetPendingApprovalsFnServiceRoleDefaultPolicy5F73EB8D","roles":[{"Ref":"GetPendingApprovalsFnServiceRole4BCF559D"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetPendingApprovalsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Get pending approval requests","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/getPendingApprovals.handler","memorySize":512,"role":{"Fn::GetAtt":["GetPendingApprovalsFnServiceRole4BCF559D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"GetApprovalRequestFn":{"id":"GetApprovalRequestFn","path":"VideoNfcApiStack-dev/GetApprovalRequestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]}],"Version":"2012-10-17"},"policyName":"GetApprovalRequestFnServiceRoleDefaultPolicy901BCF10","roles":[{"Ref":"GetApprovalRequestFnServiceRoleED0CD203"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/GetApprovalRequestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Get approval request details","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/getApprovalRequest.handler","memorySize":512,"role":{"Fn::GetAtt":["GetApprovalRequestFnServiceRoleED0CD203","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"ApproveRequestFn":{"id":"ApproveRequestFn","path":"VideoNfcApiStack-dev/ApproveRequestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/ApproveRequestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/ApproveRequestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ApproveRequestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/ApproveRequestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ApproveRequestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]},{"Action":["cognito-idp:AdminAddUserToGroup","cognito-idp:AdminCreateUser","cognito-idp:AdminSetUserPassword"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:cognito-idp:ap-northeast-1:271633506783:userpool/",{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"}]]}},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"}}],"Version":"2012-10-17"},"policyName":"ApproveRequestFnServiceRoleDefaultPolicyD214D7C8","roles":[{"Ref":"ApproveRequestFnServiceRole4351048D"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/ApproveRequestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/ApproveRequestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/ApproveRequestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ApproveRequestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Approve organization registration request","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/approveRequest.handler","memorySize":512,"role":{"Fn::GetAtt":["ApproveRequestFnServiceRole4351048D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"RejectRequestFn":{"id":"RejectRequestFn","path":"VideoNfcApiStack-dev/RejectRequestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"VideoNfcApiStack-dev/RejectRequestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"VideoNfcApiStack-dev/RejectRequestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/RejectRequestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VideoNfcApiStack-dev/RejectRequestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/RejectRequestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"}]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"/index/*"]]},{"Fn::Join":["",["arn:aws:dynamodb:ap-northeast-1:271633506783:table/",{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"}]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"}}],"Version":"2012-10-17"},"policyName":"RejectRequestFnServiceRoleDefaultPolicyC9C64531","roles":[{"Ref":"RejectRequestFnServiceRole69890352"}]}}}}}}},"Code":{"id":"Code","path":"VideoNfcApiStack-dev/RejectRequestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"VideoNfcApiStack-dev/RejectRequestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"VideoNfcApiStack-dev/RejectRequestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/RejectRequestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-271633506783-ap-northeast-1","s3Key":"1a6b5561f789e11e2ce53c27b9770f55fb17e62eb695bce0b03b2775df07587a.zip"},"description":"Reject organization registration request","environment":{"variables":{"S3_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefVideoBucket6ED8E1AF864760DE"},"ASSETS_BUCKET_NAME":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputRefAssetBucket1D0250868713D7D0"},"DYNAMODB_TABLE_VIDEO":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefVideoMetadataTable0E75C188A8FBFADA"},"DYNAMODB_TABLE_BILLING":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefBillingTableC3F396AA0CA38283"},"DYNAMODB_TABLE_ORGANIZATION":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefOrganizationTableEB2ED67CAB7DAF7D"},"DYNAMODB_TABLE_SHOP":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefShopTable66489897B4F69EEF"},"DYNAMODB_TABLE_APPROVAL_REQUEST":{"Fn::ImportValue":"video-nfc-database-dev:ExportsOutputRefApprovalRequestTable754DE8BFCE5E306A"},"CLOUDFRONT_DOMAIN":{"Fn::ImportValue":"video-nfc-storage-dev:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"SNS_TOPIC_ARN":{"Fn::ImportValue":"video-nfc-monitoring-dev:ExportsOutputRefAlertTopic2720D5359ADB6D3E"},"FRONTEND_URL":"http://localhost:3001","ENVIRONMENT":"dev"}},"handler":"handlers/rejectRequest.handler","memorySize":512,"role":{"Fn::GetAtt":["RejectRequestFnServiceRole69890352","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}],"timeout":29}}}}},"ApiGatewayLogGroup":{"id":"ApiGatewayLogGroup","path":"VideoNfcApiStack-dev/ApiGatewayLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/ApiGatewayLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/apigateway/video-nfc-dev","retentionInDays":30,"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}}}},"VideoNfcRestApi":{"id":"VideoNfcRestApi","path":"VideoNfcApiStack-dev/VideoNfcRestApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"NFCタグ付きキーホルダー向け動画配信システム API (dev)","name":"video-nfc-api-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"VideoNfcApiStack-dev/VideoNfcRestApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"VideoNfcApiStack-dev/VideoNfcRestApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}}}},"Account":{"id":"Account","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["VideoNfcRestApiCloudWatchRole4CAE3044","Arn"]}}}},"Deployment":{"id":"Deployment","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"NFCタグ付きキーホルダー向け動画配信システム API (dev)","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"DeploymentStage.dev":{"id":"DeploymentStage.dev","path":"VideoNfcApiStack-dev/VideoNfcRestApi/DeploymentStage.dev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/DeploymentStage.dev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"accessLogSetting":{"destinationArn":{"Fn::GetAtt":["ApiGatewayLogGroupA9770429","Arn"]},"format":"{\"requestId\":\"$context.requestId\",\"ip\":\"$context.identity.sourceIp\",\"user\":\"$context.identity.user\",\"caller\":\"$context.identity.caller\",\"requestTime\":\"$context.requestTime\",\"httpMethod\":\"$context.httpMethod\",\"resourcePath\":\"$context.resourcePath\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\"}"},"deploymentId":{"Ref":"VideoNfcRestApiDeploymentBE44B6A0f3a39152f086180c6aba49ae0f6e4d24"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":2000,"throttlingRateLimit":1000}],"restApiId":{"Ref":"VideoNfcRestApi2957FD56"},"stageName":"dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"video-nfc"}]}}}}},"Endpoint":{"id":"Endpoint","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Default":{"id":"Default","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.219.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Fn::GetAtt":["VideoNfcRestApi2957FD56","RootResourceId"]},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"videos":{"id":"videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["VideoNfcRestApi2957FD56","RootResourceId"]},"pathPart":"videos","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApivideos2FB4570E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"upload-url":{"id":"upload-url","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApivideos2FB4570E"},"pathPart":"upload-url","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApivideosuploadurl177C310E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateUploadUrlFn968862B7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/videos/upload-url"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..videos.upload-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateUploadUrlFn968862B7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/videos/upload-url"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/upload-url/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateUploadUrlFn968862B7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"VideoNfcRestApivideosuploadurl177C310E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListVideosFn7CEC1435","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/videos"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListVideosFn7CEC1435","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/videos"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListVideosFn7CEC1435","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.querystring.limit":false,"method.request.querystring.lastEvaluatedKey":false,"method.request.querystring.search":false},"resourceId":{"Ref":"VideoNfcRestApivideos2FB4570E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"{videoId}":{"id":"{videoId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApivideos2FB4570E"},"pathPart":"{videoId}","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApivideosvideoId49256A44"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/videos/*"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/videos/*"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.videoId":true},"resourceId":{"Ref":"VideoNfcRestApivideosvideoId49256A44"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"DELETE":{"id":"DELETE","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/DELETE/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteVideoFn76AB2E20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/DELETE/videos/*"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/DELETE/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteVideoFn76AB2E20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/DELETE/videos/*"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DeleteVideoFn76AB2E20","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.videoId":true},"resourceId":{"Ref":"VideoNfcRestApivideosvideoId49256A44"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"detail":{"id":"detail","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApivideosvideoId49256A44"},"pathPart":"detail","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApivideosvideoIddetail68B41D94"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailPublicFn32DCF86C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/videos/*/detail"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..videos.{videoId}.detail","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailPublicFn32DCF86C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/videos/*/detail"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/videos/{videoId}/detail/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetVideoDetailPublicFn32DCF86C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.videoId":true},"resourceId":{"Ref":"VideoNfcRestApivideosvideoIddetail68B41D94"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}}}}}},"admin":{"id":"admin","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["VideoNfcRestApi2957FD56","RootResourceId"]},"pathPart":"admin","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiadminC4C1F2E6"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"stats":{"id":"stats","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiadminC4C1F2E6"},"pathPart":"stats","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiadminstatsA868C662"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAdminStatsFn9FA9DE4F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/admin/stats"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAdminStatsFn9FA9DE4F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/admin/stats"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/stats/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetAdminStatsFn9FA9DE4F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"VideoNfcRestApiadminstatsA868C662"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}},"videos":{"id":"videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiadminC4C1F2E6"},"pathPart":"videos","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiadminvideos0E0E8020"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListAllVideosFn65961858","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/admin/videos"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..admin.videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListAllVideosFn65961858","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/admin/videos"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/admin/videos/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListAllVideosFn65961858","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.querystring.organizationId":false,"method.request.querystring.status":false,"method.request.querystring.search":false,"method.request.querystring.limit":false,"method.request.querystring.lastEvaluatedKey":false},"resourceId":{"Ref":"VideoNfcRestApiadminvideos0E0E8020"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}}}},"organizations":{"id":"organizations","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["VideoNfcRestApi2957FD56","RootResourceId"]},"pathPart":"organizations","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiorganizations7B4E095B"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListOrganizationsFnA0A74480","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/organizations"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListOrganizationsFnA0A74480","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/organizations"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListOrganizationsFnA0A74480","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.querystring.type":false,"method.request.querystring.parentId":false},"resourceId":{"Ref":"VideoNfcRestApiorganizations7B4E095B"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateOrganizationFn28E1EDAB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/organizations"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..organizations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateOrganizationFn28E1EDAB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/organizations"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateOrganizationFn28E1EDAB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"VideoNfcRestApiorganizations7B4E095B"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"{organizationId}":{"id":"{organizationId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiorganizations7B4E095B"},"pathPart":"{organizationId}","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiorganizationsorganizationIdA74F524E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"PUT":{"id":"PUT","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/PUT/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateOrganizationFn24918ABB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/PUT/organizations/*"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/PUT/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.PUT..organizations.{organizationId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateOrganizationFn24918ABB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/PUT/organizations/*"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UpdateOrganizationFn24918ABB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.organizationId":true},"resourceId":{"Ref":"VideoNfcRestApiorganizationsorganizationIdA74F524E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"DELETE":{"id":"DELETE","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/DELETE/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteOrganizationFn67C854BE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/DELETE/organizations/*"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/DELETE/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.DELETE..organizations.{organizationId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeleteOrganizationFn67C854BE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/DELETE/organizations/*"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/organizations/{organizationId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DeleteOrganizationFn67C854BE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.organizationId":true},"resourceId":{"Ref":"VideoNfcRestApiorganizationsorganizationIdA74F524E"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}}}},"approvals":{"id":"approvals","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["VideoNfcRestApi2957FD56","RootResourceId"]},"pathPart":"approvals","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiapprovalsC7BA2806"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateApprovalRequestFn718ADAFF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/approvals"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateApprovalRequestFn718ADAFF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/approvals"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateApprovalRequestFn718ADAFF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"VideoNfcRestApiapprovalsC7BA2806"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetPendingApprovalsFn21E353FA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/approvals"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetPendingApprovalsFn21E353FA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/approvals"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetPendingApprovalsFn21E353FA","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"VideoNfcRestApiapprovalsC7BA2806"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"{requestId}":{"id":"{requestId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiapprovalsC7BA2806"},"pathPart":"{requestId}","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestId729F57F9"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"GET":{"id":"GET","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/GET/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetApprovalRequestFnBF49EA4B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/GET/approvals/*"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/GET/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.GET..approvals.{requestId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetApprovalRequestFnBF49EA4B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/GET/approvals/*"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetApprovalRequestFnBF49EA4B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.requestId":true},"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestId729F57F9"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"submit":{"id":"submit","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiapprovalsrequestId729F57F9"},"pathPart":"submit","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdsubmit33504541"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubmitApprovalFormFn5AFD1F9D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/approvals/*/submit"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.submit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubmitApprovalFormFn5AFD1F9D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/approvals/*/submit"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/submit/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubmitApprovalFormFn5AFD1F9D","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.requestId":true},"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdsubmit33504541"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}},"approve":{"id":"approve","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiapprovalsrequestId729F57F9"},"pathPart":"approve","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdapprove8036C448"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApproveRequestFn7379B9F6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/approvals/*/approve"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.approve","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApproveRequestFn7379B9F6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/approvals/*/approve"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/approve/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ApproveRequestFn7379B9F6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.requestId":true},"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdapprove8036C448"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}},"reject":{"id":"reject","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"VideoNfcRestApiapprovalsrequestId729F57F9"},"pathPart":"reject","restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}},"OPTIONS":{"id":"OPTIONS","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'864000'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdrejectDC8373FC"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}},"POST":{"id":"POST","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject":{"id":"ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/POST/ApiPermission.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RejectRequestFn4DE6112B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/",{"Ref":"VideoNfcRestApiDeploymentStagedev631C8378"},"/POST/approvals/*/reject"]]}}}},"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject":{"id":"ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/POST/ApiPermission.Test.VideoNfcApiStackdevVideoNfcRestApi7F02901B.POST..approvals.{requestId}.reject","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RejectRequestFn4DE6112B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-northeast-1:271633506783:",{"Ref":"VideoNfcRestApi2957FD56"},"/test-invoke-stage/POST/approvals/*/reject"]]}}}},"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/VideoNfcRestApi/Default/approvals/{requestId}/reject/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-northeast-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RejectRequestFn4DE6112B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"requestParameters":{"method.request.path.requestId":true},"resourceId":{"Ref":"VideoNfcRestApiapprovalsrequestIdrejectDC8373FC"},"restApiId":{"Ref":"VideoNfcRestApi2957FD56"}}}}}}}}}}}}}}}},"ImportedUserPool":{"id":"ImportedUserPool","path":"VideoNfcApiStack-dev/ImportedUserPool","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"VideoNfcApiStack-dev/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VideoNfcApiStack-dev/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"video-nfc-dev-authorizer","providerArns":[{"Fn::Join":["",["arn:aws:cognito-idp:ap-northeast-1:271633506783:userpool/",{"Fn::ImportValue":"video-nfc-auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"}]]}],"restApiId":{"Ref":"VideoNfcRestApi2957FD56"},"type":"COGNITO_USER_POOLS"}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"VideoNfcApiStack-dev/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ApiGatewayId":{"id":"ApiGatewayId","path":"VideoNfcApiStack-dev/ApiGatewayId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CognitoUserPoolId":{"id":"CognitoUserPoolId","path":"VideoNfcApiStack-dev/CognitoUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CognitoClientId":{"id":"CognitoClientId","path":"VideoNfcApiStack-dev/CognitoClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"VideoNfcApiStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"VideoNfcApiStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VideoNfcApiStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VideoNfcApiStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}